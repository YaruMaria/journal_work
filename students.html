<!-- –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –≤ student.html –ø–æ—Å–ª–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —É—Ä–æ–∫–æ–≤ -->
<div class="calendar-section">
    <h2>–ö—É–±–∫–∏ –ø–æ –º–µ—Å—è—Ü–∞–º</h2>
    <div class="months-grid">
        {% for month_num, month_name in months %}
        <div class="month-card">
            <h3>{{ month_name }} {{ current_year }}</h3>
            <div class="trophy-selector">
                <button class="trophy-btn {% if trophies.get((current_year, month_num)) == 1 %}active{% endif %}"
                        data-month="{{ month_num }}" data-trophy="1">
                    üèÜ (–ó–æ–ª–æ—Ç–æ)
                </button>
                <button class="trophy-btn {% if trophies.get((current_year, month_num)) == 2 %}active{% endif %}"
                        data-month="{{ month_num }}" data-trophy="2">
                    ü•à (–°–µ—Ä–µ–±—Ä–æ)
                </button>
                <button class="trophy-btn {% if trophies.get((current_year, month_num)) == 3 %}active{% endif %}"
                        data-month="{{ month_num }}" data-trophy="3">
                    ü•â (–ë—Ä–æ–Ω–∑–∞)
                </button>
                <button class="trophy-btn {% if trophies.get((current_year, month_num)) == 4 %}active{% endif %}"
                        data-month="{{ month_num }}" data-trophy="4">
                    ‚ùå (–ù–µ—Ç)
                </button>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<style>
.months-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
    margin-top: 20px;
}
.month-card {
    border: 1px solid #ddd;
    padding: 15px;
    border-radius: 8px;
}
.trophy-selector {
    display: flex;
    flex-direction: column;
    gap: 5px;
    margin-top: 10px;
}
.trophy-btn {
    padding: 5px;
    border: 1px solid #ccc;
    background: white;
    cursor: pointer;
    border-radius: 4px;
}
.trophy-btn.active {
    background: #e0f7fa;
    border-color: #00bcd4;
}
</style>

<script>
document.querySelectorAll('.trophy-btn').forEach(btn => {
    btn.addEventListener('click', function() {
        const month = this.dataset.month;
        const trophy = this.dataset.trophy;

        // –£–¥–∞–ª—è–µ–º active class —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫ –≤ —ç—Ç–æ–π –≥—Ä—É–ø–ø–µ
        this.parentNode.querySelectorAll('.trophy-btn').forEach(b => {
            b.classList.remove('active');
        });

        // –î–æ–±–∞–≤–ª—è–µ–º active class –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–µ
        this.classList.add('active');

        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
        fetch('/update_trophy', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
            },
            body: `student_id={{ student[0] }}&year={{ current_year }}&month=${month}&trophy=${trophy}`
        });
    });
});
</script>